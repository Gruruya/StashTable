<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nim. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Favicon -->
<link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA=="/>

<!-- Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Lato:400,600,900' rel='stylesheet' type='text/css'/>
<link href='https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,600' rel='stylesheet' type='text/css'/>

<!-- CSS -->
<title>stashtable</title>
<style type="text/css" >
/*
Stylesheet for use with Docutils/rst2html.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.

Modified from Chad Skeeters' rst2html-style
https://bitbucket.org/cskeeters/rst2html-style/

Modified by Boyd Greenfield and narimiran
*/

html {
  font-size: 100%;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%; }

body {
  font-family: "Lato", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif;
  font-weight: 400;
  font-size: 1.125em;
  line-height: 1.5;
  color: #222;
  background-color: #FCFCFC; }

/* Skeleton grid */
.container {
  position: relative;
  width: 100%;
  max-width: 1050px;
  margin: 0 auto;
  padding: 0;
  box-sizing: border-box; }

.column,
.columns {
  width: 100%;
  float: left;
  box-sizing: border-box;
  margin-left: 1%;
}

.column:first-child,
.columns:first-child {
  margin-left: 0; }

.three.columns {
  width: 19%; }

.nine.columns {
  width: 80.0%; }

.twelve.columns {
  width: 100%;
  margin-left: 0; }

@media screen and (max-width: 860px) {
  .three.columns {
    display: none;
  }
  .nine.columns {
    width: 98.0%;
  }
  body {
    font-size: 1em;
    line-height: 1.35;
  }
}

cite {
  font-style: italic !important; }


/* Nim search input */
div#searchInputDiv {
  margin-bottom: 1em;
}
input#searchInput {
  width: 80%;
}

/*
 * Some custom formatting for input forms.
 * This also fixes input form colors on Firefox with a dark system theme on Linux.
 */
input {
  -moz-appearance: none;
  color: #333;
  background-color: #f8f8f8;
  border: 1px solid #aaa;
  font-family: "Lato", "Helvetica Neue", "HelveticaNeue", Helvetica, Arial, sans-serif;
  font-size: 0.9em;
  padding: 6px;
}
input:focus {
  border: 1px solid #1fa0eb;
  box-shadow: 0 0 2px #1fa0eb;
}

/* Docgen styles */
/* Links */
a {
  color: #07b;
  text-decoration: none;
}

a span.Identifier {
  text-decoration: underline;
  text-decoration-color: #aab;
}

a.reference-toplevel {
  font-weight: bold;
}

a.toc-backref {
  text-decoration: none;
  color: #222; }

a.link-seesrc {
  color: #607c9f;
  font-size: 0.9em;
  font-style: italic; }

a:hover,
a:focus {
  color: #607c9f;
  text-decoration: underline; }

a:hover span.Identifier {
  color: #607c9f;
}


sub,
sup {
  position: relative;
  font-size: 75%;
  line-height: 0;
  vertical-align: baseline; }

sup {
  top: -0.5em; }

sub {
  bottom: -0.25em; }

img {
  width: auto;
  height: auto;
  max-width: 100%;
  vertical-align: middle;
  border: 0;
  -ms-interpolation-mode: bicubic; }

@media print {
  * {
    color: black !important;
    text-shadow: none !important;
    background: transparent !important;
    box-shadow: none !important; }

  a,
  a:visited {
    text-decoration: underline; }

  a[href]:after {
    content: " (" attr(href) ")"; }

  abbr[title]:after {
    content: " (" attr(title) ")"; }

  .ir a:after,
  a[href^="javascript:"]:after,
  a[href^="#"]:after {
    content: ""; }

  pre,
  blockquote {
    border: 1px solid #999;
    page-break-inside: avoid; }

  thead {
    display: table-header-group; }

  tr,
  img {
    page-break-inside: avoid; }

  img {
    max-width: 100% !important; }

  @page {
    margin: 0.5cm; }

  h1 {
    page-break-before: always; }

  h1.title {
    page-break-before: avoid; }

  p,
  h2,
  h3 {
    orphans: 3;
    widows: 3; }

  h2,
  h3 {
    page-break-after: avoid; }
}


p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

small {
  font-size: 85%; }

strong {
  font-weight: 600;
  font-size: 0.95em;
  color: #3c3c3c;
}

em {
  font-style: italic; }

h1 {
  font-size: 1.8em;
  font-weight: 400;
  padding-bottom: .25em;
  border-bottom: 1px solid #aaa;
  margin-top: 2.5em;
  margin-bottom: 1em;
  line-height: 1.2em; }

h1.title {
  padding-bottom: 1em;
  border-bottom: 0px;
  font-size: 2.5em;
  text-align: center;
  font-weight: 900;
  margin-top: 0.75em;
  margin-bottom: 0em;
}

h2 {
  font-size: 1.3em;
  margin-top: 2em; }

h2.subtitle {
  text-align: center; }

h3 {
  font-size: 1.125em;
  font-style: italic;
  margin-top: 1.5em; }

h4 {
  font-size: 1.125em;
  margin-top: 1em; }

h5 {
  font-size: 1.125em;
  margin-top: 0.75em; }

h6 {
  font-size: 1.1em; }


ul,
ol {
  padding: 0;
  margin-top: 0.5em;
  margin-left: 0.75em; }

ul ul,
ul ol,
ol ol,
ol ul {
  margin-bottom: 0;
  margin-left: 1.25em; }

li {
    list-style-type: circle;
}

ul.simple-boot li {
    list-style-type: none;
    margin-left: 0em;
    margin-bottom: 0.5em;
}

ol.simple > li, ul.simple > li {
  margin-bottom: 0.25em;
  margin-left: 0.4em }

ul.simple.simple-toc > li {
    margin-top: 1em;
}

ul.simple-toc {
  list-style: none;
  font-size: 0.9em;
  margin-left: -0.3em;
  margin-top: 1em; }

ul.simple-toc > li {
    list-style-type: none;
}

ul.simple-toc-section {
  list-style-type: circle;
  margin-left: 1em;
  color: #6c9aae; }


ol.arabic {
  list-style: decimal; }

ol.loweralpha {
  list-style: lower-alpha; }

ol.upperalpha {
  list-style: upper-alpha; }

ol.lowerroman {
  list-style: lower-roman; }

ol.upperroman {
  list-style: upper-roman; }

ul.auto-toc {
  list-style-type: none; }


dl {
  margin-bottom: 1.5em; }

dt {
  margin-bottom: -0.5em;
  margin-left: 0.0em; }

dd {
  margin-left: 2.0em;
  margin-bottom: 3.0em;
  margin-top: 0.5em; }


hr {
  margin: 2em 0;
  border: 0;
  border-top: 1px solid #aaa; }

blockquote {
  font-size: 0.9em;
  font-style: italic;
  padding-left: 0.5em;
  margin-left: 0;
  border-left: 5px solid #bbc;
}

.pre {
  font-family: "Source Code Pro", Monaco, Menlo, Consolas, "Courier New", monospace;
  font-weight: 500;
  font-size: 0.85em;
  background-color: #f0f3ff;
  padding-left: 3px;
  padding-right: 3px;
  border-radius: 4px;
}

pre {
  font-family: "Source Code Pro", Monaco, Menlo, Consolas, "Courier New", monospace;
  color: #222;
  font-weight: 500;
  display: inline-block;
  box-sizing: border-box;
  min-width: 100%;
  padding: 0.5em;
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  font-size: 0.85em;
  white-space: pre !important;
  overflow-y: hidden;
  overflow-x: visible;
  background-color: ghostwhite;
  border: 1px solid #dde;
  -webkit-border-radius: 6px;
  -moz-border-radius: 6px;
  border-radius: 6px; }

.pre-scrollable {
  max-height: 340px;
  overflow-y: scroll; }


/* Nim line-numbered tables */
.line-nums-table {
  width: 100%;
  table-layout: fixed; }

table.line-nums-table {
  border-radius: 4px;
  border: 1px solid #cccccc;
  background-color: ghostwhite;
  border-collapse: separate;
  margin-top: 15px;
  margin-bottom: 25px; }

.line-nums-table tbody {
  border: none; }

.line-nums-table td pre {
  border: none;
  background-color: transparent; }

.line-nums-table td.blob-line-nums {
  width: 28px; }

.line-nums-table td.blob-line-nums pre {
  color: #b0b0b0;
  -webkit-filter: opacity(75%);
  text-align: right;
  border-color: transparent;
  background-color: transparent;
  padding-left: 0px;
  margin-left: 0px;
  padding-right: 0px;
  margin-right: 0px; }


table {
  max-width: 100%;
  background-color: transparent;
  margin-top: 0.5em;
  margin-bottom: 1.5em;
  border-collapse: collapse;
  border-color: #ccc;
  border-spacing: 0;
  font-size: 0.9em;
}

table th, table td {
  padding: 0px 0.5em 0px;
}

table th {
  background-color: #e8e8e8;
  font-weight: bold; }

table th.docinfo-name {
    background-color: transparent;
}

table tr:hover {
  background-color: ghostwhite; }


/* rst2html default used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0; }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 !important; }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 !important; }

.last, .with-subtitle {
  margin-bottom: 0 !important; }

.hidden {
  display: none; }

blockquote.epigraph {
  margin: 2em 5em; }

dl.docutils dd {
  margin-bottom: 0.5em; }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden; }


div.figure {
  margin-left: 2em;
  margin-right: 2em; }

div.footer, div.header {
  clear: both;
  text-align: center;
  color: #666;
  font-size: smaller; }

div.footer {
    padding-top: 5em;
}

div.line-block {
  display: block;
  margin-top: 1em;
  margin-bottom: 1em; }

div.line-block div.line-block {
  margin-top: 0;
  margin-bottom: 0;
  margin-left: 1.5em; }

div.topic {
  margin: 2em; }

div.search_results {
  background-color: antiquewhite;
  margin: 3em;
  padding: 1em;
  border: 1px solid #4d4d4d;
}

div#global-links ul {
  margin-left: 0;
  list-style-type: none;
}

div#global-links > simple-boot {
    margin-left: 3em;
}

hr.docutils {
  width: 75%; }

img.align-left, .figure.align-left, object.align-left {
  clear: left;
  float: left;
  margin-right: 1em; }

img.align-right, .figure.align-right, object.align-right {
  clear: right;
  float: right;
  margin-left: 1em; }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto; }

.align-left {
  text-align: left; }

.align-center {
  clear: both;
  text-align: center; }

.align-right {
  text-align: right; }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit; }

p.attribution {
  text-align: right;
  margin-left: 50%; }

p.caption {
  font-style: italic; }

p.credits {
  font-style: italic;
  font-size: smaller; }

p.label {
  white-space: nowrap; }

p.rubric {
  font-weight: bold;
  font-size: larger;
  color: maroon;
  text-align: center; }

p.topic-title {
  font-weight: bold; }

pre.address {
  margin-bottom: 0;
  margin-top: 0;
  font: inherit; }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em;
  margin-right: 2em; }

pre.code .ln {
  color: grey; }

/* line numbers */
pre.code, code {
  background-color: #eeeeee; }

pre.code .comment, code .comment {
  color: #5c6576; }

pre.code .keyword, code .keyword {
  color: #3B0D06;
  font-weight: bold; }

pre.code .literal.string, code .literal.string {
  color: #0c5404; }

pre.code .name.builtin, code .name.builtin {
  color: #352b84; }

pre.code .deleted, code .deleted {
  background-color: #DEB0A1; }

pre.code .inserted, code .inserted {
  background-color: #A3D289; }

span.classifier {
  font-style: oblique; }

span.classifier-delimiter {
  font-weight: bold; }

span.option {
  white-space: nowrap; }

span.problematic {
  color: #b30000; }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80%; }

span.DecNumber {
  color: #252dbe; }

span.BinNumber {
  color: #252dbe; }

span.HexNumber {
  color: #252dbe; }

span.OctNumber {
  color: #252dbe; }

span.FloatNumber {
  color: #252dbe; }

span.Identifier {
  color: #222; }

span.Keyword {
  font-weight: 600;
  color: #5e8f60; }

span.StringLit {
  color: #a4255b; }

span.LongStringLit {
  color: #a4255b; }

span.CharLit {
  color: #a4255b; }

span.EscapeSequence {
  color: black; }

span.Operator {
  color: black; }

span.Punctuation {
  color: black; }

span.Comment, span.LongComment {
  font-style: italic;
  font-weight: 400;
  color: #484a86; }

span.RegularExpression {
  color: darkviolet; }

span.TagStart {
  color: darkviolet; }

span.TagEnd {
  color: darkviolet; }

span.Key {
  color: #252dbe; }

span.Value {
  color: #252dbe; }

span.RawData {
  color: #a4255b; }

span.Assembler {
  color: #252dbe; }

span.Preprocessor {
  color: #252dbe; }

span.Directive {
  color: #252dbe; }

span.Command, span.Rule, span.Hyperlink, span.Label, span.Reference,
span.Other {
  color: black; }

/* Pop type, const, proc, and iterator defs in nim def blocks */
dt pre > span.Identifier, dt pre > span.Operator {
  color: #155da4;
  font-weight: 700; }

dt pre > span.Keyword ~ span.Identifier, dt pre > span.Identifier ~ span.Identifier,
dt pre > span.Operator ~ span.Identifier, dt pre > span.Other ~ span.Identifier {
  color: inherit;
  font-weight: inherit; }

/* Nim sprite for the footer (taken from main page favicon) */
.nim-sprite {
  display: inline-block;
  height: 16px;
  width: 16px;
  background-position: 0 0;
  background-size: 16px 16px;
  -webkit-filter: opacity(50%);
  background-repeat: no-repeat;
  background-image: url("data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAUAAAAF////AP///wD///8A////AP///wD///8A////AP///wD///8A////AAAAAAIAAABbAAAAlQAAAKIAAACbAAAAmwAAAKIAAACVAAAAWwAAAAL///8A////AP///wD///8A////AAAAABQAAADAAAAAYwAAAA3///8A////AP///wD///8AAAAADQAAAGMAAADAAAAAFP///wD///8A////AP///wAAAACdAAAAOv///wD///8A////AP///wD///8A////AP///wD///8AAAAAOgAAAJ3///8A////AP///wAAAAAnAAAAcP///wAAAAAoAAAASv///wD///8A////AP///wAAAABKAAAAKP///wAAAABwAAAAJ////wD///8AAAAAgQAAABwAAACIAAAAkAAAAJMAAACtAAAAFQAAABUAAACtAAAAkwAAAJAAAACIAAAAHAAAAIH///8A////AAAAAKQAAACrAAAAaP///wD///8AAAAARQAAANIAAADSAAAARf///wD///8AAAAAaAAAAKsAAACk////AAAAADMAAACcAAAAnQAAABj///8A////AP///wAAAAAYAAAAGP///wD///8A////AAAAABgAAACdAAAAnAAAADMAAAB1AAAAwwAAAP8AAADpAAAAsQAAAE4AAAAb////AP///wAAAAAbAAAATgAAALEAAADpAAAA/wAAAMMAAAB1AAAAtwAAAOkAAAD/AAAA/wAAAP8AAADvAAAA3gAAAN4AAADeAAAA3gAAAO8AAAD/AAAA/wAAAP8AAADpAAAAtwAAAGUAAAA/AAAA3wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAADfAAAAPwAAAGX///8A////AAAAAEgAAADtAAAAvwAAAL0AAADGAAAA7wAAAO8AAADGAAAAvQAAAL8AAADtAAAASP///wD///8A////AP///wD///8AAAAAO////wD///8A////AAAAAIcAAACH////AP///wD///8AAAAAO////wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A////AP///wD///8A//8AAP//AAD4HwAA7/cAAN/7AAD//wAAoYUAAJ55AACf+QAAh+EAAAAAAADAAwAA4AcAAP5/AAD//wAA//8AAA==");
  margin-bottom: -5px; }

span.pragmadots {
  /* Position: relative frees us up to make the dots
  look really nice without fucking up the layout and
  causing bulging in the parent container */
  position: relative;
  /* 1px down looks slightly nicer */
  top: 1px;
  padding: 2px;
  background-color: #e8e8e8;
  border-radius: 4px;
  margin: 0 2px;
  cursor: pointer;
  font-size: 0.8em;
}

span.pragmadots:hover {
  background-color: #DBDBDB;
}
span.pragmawrap {
  display: none;
}

span.attachedType {
  display: none;
  visibility: hidden;
}
</style>

<script type="text/javascript" src="dochack.js"></script>

<script type="text/javascript">
function main() {
  var pragmaDots = document.getElementsByClassName("pragmadots");
  for (var i = 0; i < pragmaDots.length; i++) {
    pragmaDots[i].onclick = function(event) {
      // Hide tease
      event.target.parentNode.style.display = "none";
      // Show actual
      event.target.parentNode.nextElementSibling.style.display = "inline";
    }
  }
}
</script>

</head>
<body onload="main()">
<div class="document" id="documentId">
  <div class="container">
    <h1 class="title">stashtable</h1>
    <div class="row">
  <div class="three columns">
  <div id="global-links">
    <ul class="simple">
    </ul>
  </div>
  <div id="searchInputDiv">
    Search: <input type="text" id="searchInput"
      onkeyup="search()" />
  </div>
  <div>
    Group by:
    <select onchange="groupBy(this.value)">
      <option value="section">Section</option>
      <option value="type">Type</option>
    </select>
  </div>
  <ul class="simple simple-toc" id="toc-list">
<li><a class="reference" id="basic-usage_toc" href="#basic-usage">Basic usage</a></li>
<li><a class="reference" id="see-also_toc" href="#see-also">See also</a></li>
<li>
  <a class="reference reference-toplevel" href="#7" id="57">Types</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#Index"
    title="Index = distinct int"><wbr />Index<span class="attachedType"></span></a></li>
  <li><a class="reference" href="#StashTable"
    title="StashTable[K; V; Capacity] = ref StashTableObject[K, V, Capacity]"><wbr />Stash<wbr />Table<span class="attachedType"></span></a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#10" id="60">Consts</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#NotInStash"
    title="NotInStash = -2147483647"><wbr />Not<wbr />In<wbr />Stash<span class="attachedType"></span></a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#12" id="62">Procs</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#newStashTable"
    title="newStashTable[K; V; Capacity: static int](): StashTable[K, V, Capacity]"><wbr />new<wbr />Stash<wbr />Table<span class="attachedType">StashTable</span></a></li>
  <li><a class="reference" href="#%3Ddestroy%2CStashTableObject%5BK%2CV%2CCapacity%5D"
    title="`=destroy`[K, V, Capacity](stash: var StashTableObject[K, V, Capacity])"><wbr />`=destroy`<span class="attachedType"></span></a></li>
  <li><a class="reference" href="#%3D%3D%2CIndex%2CIndex"
    title="`==`(x, y: Index): bool"><wbr />`==`<span class="attachedType">Index</span></a></li>
  <li><a class="reference" href="#%24%2CIndex"
    title="`$`(index: Index): string"><wbr />`$`<span class="attachedType">Index</span></a></li>
  <li><a class="reference" href="#hashis%2CStashTable%2CK"
    title="hashis[K](t: StashTable; key: K): int"><wbr />hashis<span class="attachedType">StashTable</span></a></li>
  <li><a class="reference" href="#len%2CStashTable"
    title="len(stash: StashTable): int"><wbr />len<span class="attachedType">StashTable</span></a></li>
  <li><a class="reference" href="#findIndex%2CStashTable%5BK%2CV%2CCapacity%5D%2CK"
    title="findIndex[K, V, Capacity](stash: StashTable[K, V, Capacity]; key: K): Index"><wbr />find<wbr />Index<span class="attachedType">StashTable</span></a></li>
  <li><a class="reference" href="#%24%2CStashTable"
    title="`$`(stash: StashTable): string"><wbr />`$`<span class="attachedType">StashTable</span></a></li>
  <li><a class="reference" href="#insert%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2CV"
    title="insert[K, V, Capacity](stash: StashTable[K, V, Capacity]; key: K; value: V): (Index, bool)"><wbr />insert<span class="attachedType">StashTable</span></a></li>
  <li><a class="reference" href="#upsert%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2CV"
    title="upsert[K, V, Capacity](stash: StashTable[K, V, Capacity]; key: K; value: V): (Index, bool)"><wbr />upsert<span class="attachedType">StashTable</span></a></li>
  <li><a class="reference" href="#%5B%5D%3D%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2CV"
    title="`[]=`[K, V, Capacity](stash: StashTable[K, V, Capacity]; key: K; value: V)"><wbr />`[]=`<span class="attachedType">StashTable</span></a></li>
  <li><a class="reference" href="#addAll%2CStashTable%5BK%2CV%2CCapacity1%5D%2CStashTable%5BK%2CV%2CCapacity2%5D%2Cbool"
    title="addAll[K; V; Capacity1: static int; Capacity2: static int](
    toStashTable: StashTable[K, V, Capacity1];
    fromStashTable: StashTable[K, V, Capacity2]; upsert: bool): bool"><wbr />add<wbr />All<span class="attachedType">StashTable</span></a></li>
  <li><a class="reference" href="#del%2CStashTable%5BK%2CV%2CCapacity%5D%2CK"
    title="del[K, V, Capacity](stash: StashTable[K, V, Capacity]; key: K)"><wbr />del<span class="attachedType">StashTable</span></a></li>
  <li><a class="reference" href="#clear%2CStashTable%5BK%2CV%2CCapacity%5D"
    title="clear[K, V, Capacity](stash: StashTable[K, V, Capacity])"><wbr />clear<span class="attachedType">StashTable</span></a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#15" id="65">Iterators</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#keys.i%2CStashTable%5BK%2CV%2CCapacity%5D"
    title="keys[K, V, Capacity](stash: StashTable[K, V, Capacity]): (K, Index)"><wbr />keys<span class="attachedType">StashTable</span></a></li>

  </ul>
</li>
<li>
  <a class="reference reference-toplevel" href="#18" id="68">Templates</a>
  <ul class="simple simple-toc-section">
      <li><a class="reference" href="#withFound.t%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2CIndex%2Cuntyped"
    title="withFound[K; V; Capacity](stash: StashTable[K, V, Capacity]; thekey: K; theindex: Index;
                        body: untyped)"><wbr />with<wbr />Found<span class="attachedType">StashTable</span></a></li>
  <li><a class="reference" href="#withValue.t%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2Cuntyped%2Cuntyped"
    title="withValue[K; V; Capacity](stash: StashTable[K, V, Capacity]; thekey: K;
                        body1, body2: untyped)"><wbr />with<wbr />Value<span class="attachedType">StashTable</span></a></li>
  <li><a class="reference" href="#withValue.t%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2Cuntyped"
    title="withValue[K; V; Capacity](stash: StashTable[K, V, Capacity]; thekey: K; body: untyped)"><wbr />with<wbr />Value<span class="attachedType">StashTable</span></a></li>

  </ul>
</li>

</ul>

  </div>
  <div class="nine columns" id="content">
  <div id="tocRoot"></div>
  
  <p class="module-desc"><p><tt class="docutils literal"><span class="pre">StashTable</span></tt> is a space- and time-efficient generic concurrent hash table (also often named map or dictionary in other programming languages) that is a mapping from keys to values.</p>
<p>Thanks to it's unique collision resolution strategy, StashTable provides following key features:</p>
<ul class="simple"><li>O(1) amortized parallel reads and writes</li>
<li>O(1) worst-case serialized inserts</li>
<li>O(1) amortized serialized deletes</li>
<li>Fast, cache-friendly iterating that does not block and is not blocked by any other operation</li>
</ul>
<p>API in a nutshell:</p>
<ul class="simple"><li><a class="reference external" href="#keys.i%2CStashTable%5BK%2CV%2CCapacity%5D">keys</a> iterator to access all items</li>
<li><a class="reference external" href="#withValue.t%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2Cuntyped%2Cuntyped">withValue</a> and <a class="reference external" href="#withFound.t%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2CIndex%2Cuntyped">withFound</a> templates lock access to a single item but any other operation can proceed in parallel</li>
<li>other operations (<a class="reference external" href="#len%2CStashTable">len</a>, <a class="reference external" href="#insert%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2CV">insert</a>, <a class="reference external" href="#upsert%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2CV">upsert</a>, <a class="reference external" href="#addAll%2CStashTable%5BK%2CV%2CCapacity1%5D%2CStashTable%5BK%2CV%2CCapacity2%5D%2Cbool">addAll</a>, <a class="reference external" href="#addAll%2CStashTable%5BK%2CV%2CCapacity1%5D%2CStashTable%5BK%2CV%2CCapacity2%5D%2Cbool">del</a>, and <a class="reference external" href="#clear%2CStashTable%5BK%2CV%2CCapacity%5D">clear</a>) will block each other</li>
</ul>
<p>caveats:</p>
<ul class="simple"><li>Because iterating does not block, aggregate functions do not give consistent answers if other threads are modifying the table</li>
<li><tt class="docutils literal"><span class="pre">withValue</span></tt> or <tt class="docutils literal"><span class="pre">withFound</span></tt> calls cannot be nested, unless always in same key order. Otherwise a deadlock is bound to occur</li>
<li>A blocking operation cannot be called from inside <tt class="docutils literal"><span class="pre">withValue</span></tt> or <tt class="docutils literal"><span class="pre">withFound</span></tt>. Otherwise a deadlock is bound to occur</li>
<li>Don't put strings or seqs in keys or values (this is an inherent limitation of Nim itself)</li>
</ul>
<p>StashTable has <a class="reference external" href="https://nim-lang.org/docs/manual.html#types-reference-and-pointer-types">ref semantics</a>.</p>

<h1><a class="toc-backref" id="basic-usage" href="#basic-usage">Basic usage</a></h1><pre class="listing"><span class="Keyword">from</span> <span class="Identifier">sequtils</span> <span class="Keyword">import</span> <span class="Identifier">zip</span>

<span class="Keyword">type</span> <span class="Identifier">BeatleName</span> <span class="Operator">=</span> <span class="Keyword">enum</span>
  <span class="Keyword">Nil</span> <span class="Operator">=</span> <span class="StringLit">&quot;&quot;</span><span class="Punctuation">,</span> <span class="Identifier">John</span> <span class="Operator">=</span> <span class="StringLit">&quot;John&quot;</span><span class="Punctuation">,</span> <span class="Identifier">Paul</span> <span class="Operator">=</span> <span class="StringLit">&quot;Paul&quot;</span><span class="Punctuation">,</span> <span class="Identifier">George</span> <span class="Operator">=</span> <span class="StringLit">&quot;George&quot;</span><span class="Punctuation">,</span> <span class="Identifier">Ringo</span> <span class="Operator">=</span> <span class="StringLit">&quot;Ringo&quot;</span>

<span class="Keyword">const</span> <span class="Identifier">BeatleMaximum</span> <span class="Operator">=</span> <span class="DecNumber">4</span>

<span class="Keyword">let</span>
  <span class="Identifier">names</span> <span class="Operator">=</span> <span class="Punctuation">[</span><span class="Identifier">John</span><span class="Punctuation">,</span> <span class="Identifier">Paul</span><span class="Punctuation">,</span> <span class="Identifier">George</span><span class="Punctuation">,</span> <span class="Identifier">Ringo</span><span class="Punctuation">]</span>
  <span class="Identifier">years</span> <span class="Operator">=</span> <span class="Punctuation">[</span><span class="DecNumber">1940</span><span class="Punctuation">,</span> <span class="DecNumber">1942</span><span class="Punctuation">,</span> <span class="DecNumber">1943</span><span class="Punctuation">,</span> <span class="DecNumber">1940</span><span class="Punctuation">]</span>
  <span class="Identifier">beatles</span> <span class="Operator">=</span> <span class="Identifier">newStashTable</span><span class="Punctuation">[</span><span class="Identifier">BeatleName</span><span class="Punctuation">,</span> <span class="Identifier">int</span><span class="Punctuation">,</span> <span class="Identifier">BeatleMaximum</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

<span class="Keyword">for</span> <span class="Punctuation">(</span><span class="Identifier">name</span> <span class="Punctuation">,</span> <span class="Identifier">birthYear</span><span class="Punctuation">)</span> <span class="Keyword">in</span> <span class="Identifier">zip</span><span class="Punctuation">(</span><span class="Identifier">names</span><span class="Punctuation">,</span> <span class="Identifier">years</span><span class="Punctuation">)</span><span class="Punctuation">:</span>
  <span class="Identifier">beatles</span><span class="Punctuation">[</span><span class="Identifier">name</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Identifier">birthYear</span>

<span class="Identifier">echo</span> <span class="Identifier">beatles</span>
<span class="Identifier">doAssert</span> <span class="Operator">$</span><span class="Identifier">beatles</span> <span class="Operator">==</span> <span class="StringLit">&quot;{John: 1940, Paul: 1942, George: 1943, Ringo: 1940}&quot;</span>

<span class="Keyword">type</span> <span class="Identifier">Names</span> <span class="Operator">=</span> <span class="Identifier">array</span><span class="Punctuation">[</span><span class="DecNumber">2</span><span class="Punctuation">,</span> <span class="Identifier">BeatleName</span><span class="Punctuation">]</span>

<span class="Keyword">let</span> <span class="Identifier">beatlesByYear</span> <span class="Operator">=</span> <span class="Identifier">newStashTable</span><span class="Punctuation">[</span><span class="Identifier">int</span><span class="Punctuation">,</span> <span class="Identifier">Names</span><span class="Punctuation">,</span> <span class="Identifier">BeatleMaximum</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Punctuation">)</span>

<span class="Keyword">for</span> <span class="Punctuation">(</span><span class="Identifier">birthYear</span> <span class="Punctuation">,</span> <span class="Identifier">name</span><span class="Punctuation">)</span> <span class="Keyword">in</span> <span class="Identifier">zip</span><span class="Punctuation">(</span><span class="Identifier">years</span><span class="Punctuation">,</span> <span class="Identifier">names</span><span class="Punctuation">)</span><span class="Punctuation">:</span>
  <span class="Identifier">beatlesByYear</span><span class="Operator">.</span><span class="Identifier">withValue</span><span class="Punctuation">(</span><span class="Identifier">birthYear</span><span class="Punctuation">)</span><span class="Punctuation">:</span>
    <span class="Identifier">value</span><span class="Punctuation">[</span><span class="DecNumber">1</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Identifier">name</span>
  <span class="Keyword">do</span><span class="Punctuation">:</span>
    <span class="Comment"># key doesn't exist, we create one</span>
    <span class="Identifier">beatlesByYear</span><span class="Punctuation">[</span><span class="Identifier">birthYear</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Punctuation">[</span><span class="Identifier">name</span><span class="Punctuation">,</span> <span class="Keyword">Nil</span><span class="Punctuation">]</span>

<span class="Identifier">echo</span> <span class="Identifier">beatlesByYear</span>
<span class="Identifier">doAssert</span> <span class="Operator">$</span><span class="Identifier">beatlesByYear</span> <span class="Operator">==</span> <span class="StringLit">&quot;{1940: [John, Ringo], 1942: [Paul, ], 1943: [George, ]}&quot;</span></pre>
<h1><a class="toc-backref" id="see-also" href="#see-also">See also</a></h1><p><a class="reference external" href="https://nim-lang.org/docs/sharedtables.html">sharedtables</a> <a class="reference external" href="https://nim-lang.org/docs/tables.html">tables</a> <a class="reference external" href="https://nim-lang.org/docs/hashes.html">hashes</a></p>
</p>
  <div class="section" id="7">
<h1><a class="toc-backref" href="#7">Types</a></h1>
<dl class="item">
<a id="Index"></a>
<dt><pre><a href="stashtable.html#Index"><span class="Identifier">Index</span></a> <span class="Other">=</span> <span class="Keyword">distinct</span> <span class="Identifier">int</span></pre></dt>
<dd>

Index to an item (item = key-value pair). Other threads may delete or move the item until it's locked with <tt class="docutils literal"><span class="pre">withFound</span></tt> template.

</dd>
<a id="StashTable"></a>
<dt><pre><a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">;</span> <span class="Identifier">V</span><span class="Other">;</span> <span class="Identifier">Capacity</span><span class="Other">]</span> <span class="Other">=</span> <span class="Keyword">ref</span> <span class="Identifier">StashTableObject</span><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span></pre></dt>
<dd>

Generic thread-safe hash table.

</dd>

</dl></div>
<div class="section" id="10">
<h1><a class="toc-backref" href="#10">Consts</a></h1>
<dl class="item">
<a id="NotInStash"></a>
<dt><pre><a href="stashtable.html#NotInStash"><span class="Identifier">NotInStash</span></a> <span class="Other">=</span> <span class="DecNumber">-2147483647</span></pre></dt>
<dd>

Index for keys not in the table.

</dd>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#12">Procs</a></h1>
<dl class="item">
<a id="newStashTable"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#newStashTable"><span class="Identifier">newStashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">;</span> <span class="Identifier">V</span><span class="Other">;</span> <span class="Identifier">Capacity</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span><span class="Other">)</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span></pre></dt>
<dd>

<p>Creates a new hash table that is empty.</p>
<p><tt class="docutils literal"><span class="pre">Capacity</span></tt> must be a power of two. If you need to accept runtime values for this you could use the <a class="reference external" href="https://nim-lang.org/docs/math.html#nextPowerOfTwo,int">nextPowerOfTwo</a> proc</p>
<p>After maximum capacity is reached, inserts and upserts will start returning <tt class="docutils literal"><span class="pre">NotInStash</span></tt>. If you need to grow the capacity, create a new larger table, copy items to it with <tt class="docutils literal"><span class="pre">addAll</span></tt> proc and switch reference(s).</p>
<p>Recommended practice is to reserve enough capacity right at initialisation, because</p>
<ul class="simple"><li>StashTable is very space-efficient anyway (especially when using pointers as values)</li>
<li><tt class="docutils literal"><span class="pre">addAll</span></tt> takes some time and blocked operations will naturally not be reflected in new table.</li>
<li><tt class="docutils literal"><span class="pre">addAll</span></tt> will temporarily need enough memory to hold both old <strong><em>and</em></strong> new table</li>
<li>Last but not least: all extra capacity will speed up execution by lowering probability of hash collisions</li>
</ul>


</dd>
<a id="=destroy,StashTableObject[K,V,Capacity]"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#%3Ddestroy%2CStashTableObject%5BK%2CV%2CCapacity%5D"><span class="Identifier">`=destroy`</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">stash</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">StashTableObject</span><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>

Releases OS resources reserved by locks.

</dd>
<a id="==,Index,Index"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#%3D%3D%2CIndex%2CIndex"><span class="Identifier">`==`</span></a><span class="Other">(</span><span class="Identifier">x</span><span class="Other">,</span> <span class="Identifier">y</span><span class="Other">:</span> <a href="stashtable.html#Index"><span class="Identifier">Index</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">borrow</span></span><span class="Other">.}</span></span></pre></dt>
<dd>



</dd>
<a id="$,Index"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#%24%2CIndex"><span class="Identifier">`$`</span></a><span class="Other">(</span><span class="Identifier">index</span><span class="Other">:</span> <a href="stashtable.html#Index"><span class="Identifier">Index</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">raises</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span><span class="Other">,</span> <span class="Identifier">tags</span><span class="Other">:</span> <span class="Other">[</span><span class="Other">]</span></span><span class="Other">.}</span></span></pre></dt>
<dd>



</dd>
<a id="hashis,StashTable,K"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#hashis%2CStashTable%2CK"><span class="Identifier">hashis</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">t</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">;</span> <span class="Identifier">key</span><span class="Other">:</span> <span class="Identifier">K</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">inline</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

This should not need to be public...

</dd>
<a id="len,StashTable"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#len%2CStashTable"><span class="Identifier">len</span></a><span class="Other">(</span><span class="Identifier">stash</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">int</span> <span><span class="Other">{</span><span class="Other pragmadots">...</span><span class="Other">}</span></span><span class="pragmawrap"><span class="Other">{.</span><span class="pragma"><span class="Identifier">inline</span></span><span class="Other">.}</span></span></pre></dt>
<dd>

Returns the number of keys in <tt class="docutils literal"><span class="pre">stash</span></tt>.

</dd>
<a id="findIndex,StashTable[K,V,Capacity],K"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#findIndex%2CStashTable%5BK%2CV%2CCapacity%5D%2CK"><span class="Identifier">findIndex</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">stash</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">key</span><span class="Other">:</span> <span class="Identifier">K</span><span class="Other">)</span><span class="Other">:</span> <a href="stashtable.html#Index"><span class="Identifier">Index</span></a></pre></dt>
<dd>

Returns <tt class="docutils literal"><span class="pre">Index</span></tt> for given <tt class="docutils literal"><span class="pre">key</span></tt>, or <tt class="docutils literal"><span class="pre">NotInStash</span></tt> if key was not in <tt class="docutils literal"><span class="pre">stash</span></tt>. Note that the returned <tt class="docutils literal"><span class="pre">Index</span></tt> may be invalidated at any moment by other threads.

</dd>
<a id="$,StashTable"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#%24%2CStashTable"><span class="Identifier">`$`</span></a><span class="Other">(</span><span class="Identifier">stash</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span></pre></dt>
<dd>



</dd>
<a id="insert,StashTable[K,V,Capacity],K,V"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#insert%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2CV"><span class="Identifier">insert</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">stash</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">key</span><span class="Other">:</span> <span class="Identifier">K</span><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">V</span><span class="Other">)</span><span class="Other">:</span> <span class="Other">(</span><a href="stashtable.html#Index"><span class="Identifier">Index</span></a><span class="Other">,</span>
    <span class="Identifier">bool</span><span class="Other">)</span></pre></dt>
<dd>

Inserts a <tt class="docutils literal"><span class="pre">(key, value)</span></tt> pair into <tt class="docutils literal"><span class="pre">stash</span></tt>. Returns a tuple with following information:<ul class="simple"><li><tt class="docutils literal"><span class="pre">(i , true)</span></tt> : The item was succesfully inserted to Index i</li>
<li><tt class="docutils literal"><span class="pre">(i , false)</span></tt> : The item was not inserted because there was already item with the same <tt class="docutils literal"><span class="pre">key</span></tt> at Index i</li>
<li><tt class="docutils literal"><span class="pre">(NotInStash , false)</span></tt> : The item was not inserted because <tt class="docutils literal"><span class="pre">stash</span></tt> was full, i.e. <tt class="docutils literal"><span class="pre">len</span></tt> == <tt class="docutils literal"><span class="pre">Capacity</span></tt></li>
</ul>

<p><strong class="examples_text">Examples:</strong></p>
<pre class="listing"><span class="Keyword">let</span> <span class="Identifier">a</span> <span class="Other">=</span> <span class="Identifier">newStashTable</span><span class="Other">[</span><span class="Identifier">char</span><span class="Other">,</span> <span class="Identifier">int</span><span class="Other">,</span> <span class="DecNumber">1024</span><span class="Other">]</span><span class="Other">(</span><span class="Other">)</span>
<span class="Keyword">let</span> <span class="Other">(</span><span class="Identifier">index1</span><span class="Other">,</span> <span class="Identifier">wasinserted1</span><span class="Other">)</span> <span class="Other">=</span> <span class="Identifier">a</span><span class="Other">.</span><span class="Identifier">insert</span><span class="Other">(</span><span class="CharLit">'x'</span><span class="Other">,</span> <span class="DecNumber">7</span><span class="Other">)</span>
<span class="Identifier">doAssert</span> <span class="Identifier">wasinserted1</span>
<span class="Keyword">let</span> <span class="Other">(</span><span class="Identifier">index2</span><span class="Other">,</span> <span class="Identifier">wasinserted2</span><span class="Other">)</span> <span class="Other">=</span> <span class="Identifier">a</span><span class="Other">.</span><span class="Identifier">insert</span><span class="Other">(</span><span class="CharLit">'x'</span><span class="Other">,</span> <span class="DecNumber">33</span><span class="Other">)</span>
<span class="Identifier">doAssert</span> <span class="Identifier">index2</span> <span class="Operator">==</span> <span class="Identifier">index1</span> <span class="Keyword">and</span> <span class="Keyword">not</span> <span class="Identifier">wasinserted2</span></pre>

</dd>
<a id="upsert,StashTable[K,V,Capacity],K,V"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#upsert%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2CV"><span class="Identifier">upsert</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">stash</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">key</span><span class="Other">:</span> <span class="Identifier">K</span><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">V</span><span class="Other">)</span><span class="Other">:</span> <span class="Other">(</span><a href="stashtable.html#Index"><span class="Identifier">Index</span></a><span class="Other">,</span>
    <span class="Identifier">bool</span><span class="Other">)</span></pre></dt>
<dd>

Updates value at <tt class="docutils literal"><span class="pre">stash[key]</span></tt> or inserts item if <tt class="docutils literal"><span class="pre">key</span></tt> not present. Returns a tuple with following information:<ul class="simple"><li><tt class="docutils literal"><span class="pre">(i , true)</span></tt> : The item was succesfully inserted to Index i</li>
<li><tt class="docutils literal"><span class="pre">(i , false)</span></tt> : The item already existed at Index i and it's value was updated to given <tt class="docutils literal"><span class="pre">value</span></tt></li>
<li><tt class="docutils literal"><span class="pre">(NotInStash , false)</span></tt> : The key did not exist but the item could not be inserted because <tt class="docutils literal"><span class="pre">stash</span></tt> was full</li>
</ul>


</dd>
<a id="[]=,StashTable[K,V,Capacity],K,V"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#%5B%5D%3D%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2CV"><span class="Identifier">`[]=`</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">stash</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">key</span><span class="Other">:</span> <span class="Identifier">K</span><span class="Other">;</span> <span class="Identifier">value</span><span class="Other">:</span> <span class="Identifier">V</span><span class="Other">)</span></pre></dt>
<dd>

Executes <tt class="docutils literal"><span class="pre">upsert</span></tt> and silently discards the result.

</dd>
<a id="addAll,StashTable[K,V,Capacity1],StashTable[K,V,Capacity2],bool"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#addAll%2CStashTable%5BK%2CV%2CCapacity1%5D%2CStashTable%5BK%2CV%2CCapacity2%5D%2Cbool"><span class="Identifier">addAll</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">;</span> <span class="Identifier">V</span><span class="Other">;</span> <span class="Identifier">Capacity1</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">;</span> <span class="Identifier">Capacity2</span><span class="Other">:</span> <span class="Identifier">static</span> <span class="Identifier">int</span><span class="Other">]</span><span class="Other">(</span>
    <span class="Identifier">toStashTable</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity1</span><span class="Other">]</span><span class="Other">;</span>
    <span class="Identifier">fromStashTable</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity2</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">upsert</span><span class="Other">:</span> <span class="Identifier">bool</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">bool</span></pre></dt>
<dd>

Copies all items from <tt class="docutils literal"><span class="pre">fromStashTable</span></tt> to <tt class="docutils literal"><span class="pre">toStashTable</span></tt>. <tt class="docutils literal"><span class="pre">upsert</span></tt> parameter tells whether existing keys will be updated or skipped.

</dd>
<a id="del,StashTable[K,V,Capacity],K"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#del%2CStashTable%5BK%2CV%2CCapacity%5D%2CK"><span class="Identifier">del</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">stash</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">key</span><span class="Other">:</span> <span class="Identifier">K</span><span class="Other">)</span></pre></dt>
<dd>

<p>Deletes <tt class="docutils literal"><span class="pre">key</span></tt> from <tt class="docutils literal"><span class="pre">stash</span></tt>. Does nothing if the key does not exist.</p>
<p>Note that <tt class="docutils literal"><span class="pre">del</span></tt> must not be called from inside a <tt class="docutils literal"><span class="pre">withValue</span></tt> or <tt class="docutils literal"><span class="pre">withFound</span></tt> block. Instead, write down the <tt class="docutils literal"><span class="pre">key</span></tt> and call <tt class="docutils literal"><span class="pre">del</span></tt> afterwards.</p>
<pre class="listing"><span class="Keyword">let</span> <span class="Identifier">s</span> <span class="Operator">=</span> <span class="Identifier">newStashTable</span><span class="Punctuation">[</span><span class="Identifier">int</span><span class="Punctuation">,</span> <span class="Identifier">char</span><span class="Punctuation">,</span> <span class="DecNumber">4</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
<span class="Keyword">var</span> <span class="Identifier">deletables</span><span class="Punctuation">:</span> <span class="Identifier">seq</span><span class="Punctuation">[</span><span class="Identifier">int</span><span class="Punctuation">]</span>
<span class="Identifier">s</span><span class="Punctuation">[</span><span class="DecNumber">1</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="CharLit">'a'</span> <span class="Punctuation">;</span> <span class="Identifier">s</span><span class="Punctuation">[</span><span class="DecNumber">2</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="CharLit">'b'</span> <span class="Punctuation">;</span> <span class="Identifier">s</span><span class="Punctuation">[</span><span class="DecNumber">3</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="CharLit">'a'</span>
<span class="Identifier">doAssert</span> <span class="Identifier">s</span><span class="Operator">.</span><span class="Identifier">len</span> <span class="Operator">==</span> <span class="DecNumber">3</span>
<span class="Keyword">for</span> <span class="Punctuation">(</span><span class="Identifier">key</span><span class="Punctuation">,</span> <span class="Identifier">index</span><span class="Punctuation">)</span> <span class="Keyword">in</span> <span class="Identifier">s</span><span class="Operator">.</span><span class="Identifier">keys</span><span class="Punctuation">:</span>
  <span class="Identifier">s</span><span class="Operator">.</span><span class="Identifier">withFound</span><span class="Punctuation">(</span><span class="Identifier">key</span><span class="Punctuation">,</span> <span class="Identifier">index</span><span class="Punctuation">)</span><span class="Punctuation">:</span>
    <span class="Keyword">if</span> <span class="Identifier">value</span><span class="Punctuation">[</span><span class="Punctuation">]</span> <span class="Operator">!=</span> <span class="CharLit">'b'</span><span class="Punctuation">:</span> <span class="Identifier">deletables</span><span class="Operator">.</span><span class="Identifier">add</span><span class="Punctuation">(</span><span class="Identifier">key</span><span class="Punctuation">)</span>
<span class="Keyword">for</span> <span class="Identifier">key</span> <span class="Keyword">in</span> <span class="Identifier">deletables</span><span class="Punctuation">:</span> <span class="Identifier">s</span><span class="Operator">.</span><span class="Identifier">del</span><span class="Punctuation">(</span><span class="Identifier">key</span><span class="Punctuation">)</span>
<span class="Identifier">doAssert</span> <span class="Identifier">s</span><span class="Operator">.</span><span class="Identifier">len</span> <span class="Operator">==</span> <span class="DecNumber">1</span></pre>

</dd>
<a id="clear,StashTable[K,V,Capacity]"></a>
<dt><pre><span class="Keyword">proc</span> <a href="#clear%2CStashTable%5BK%2CV%2CCapacity%5D"><span class="Identifier">clear</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">stash</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">)</span></pre></dt>
<dd>

Resets the stash so that it is empty.

</dd>

</dl></div>
<div class="section" id="15">
<h1><a class="toc-backref" href="#15">Iterators</a></h1>
<dl class="item">
<a id="keys.i,StashTable[K,V,Capacity]"></a>
<dt><pre><span class="Keyword">iterator</span> <a href="#keys.i%2CStashTable%5BK%2CV%2CCapacity%5D"><span class="Identifier">keys</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">stash</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Other">(</span><span class="Identifier">K</span><span class="Other">,</span> <a href="stashtable.html#Index"><span class="Identifier">Index</span></a><span class="Other">)</span></pre></dt>
<dd>

<p>Iterates over all <tt class="docutils literal"><span class="pre">(key , index)</span></tt> pairs in the table <tt class="docutils literal"><span class="pre">stash</span></tt>.</p>
<p>feature: if there are no deletes, iteration order is insertion order.</p>
<pre class="listing"><span class="Keyword">let</span> <span class="Identifier">a</span> <span class="Operator">=</span> <span class="Identifier">newStashTable</span><span class="Punctuation">[</span><span class="Identifier">char</span><span class="Punctuation">,</span> <span class="Identifier">array</span><span class="Punctuation">[</span><span class="DecNumber">4</span><span class="Punctuation">,</span> <span class="Identifier">int</span><span class="Punctuation">]</span><span class="Punctuation">,</span> <span class="DecNumber">128</span><span class="Punctuation">]</span><span class="Punctuation">(</span><span class="Punctuation">)</span>
<span class="Identifier">a</span><span class="Punctuation">[</span><span class="CharLit">'o'</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Punctuation">[</span><span class="DecNumber">1</span><span class="Punctuation">,</span> <span class="DecNumber">5</span><span class="Punctuation">,</span> <span class="DecNumber">7</span><span class="Punctuation">,</span> <span class="DecNumber">9</span><span class="Punctuation">]</span>
<span class="Identifier">a</span><span class="Punctuation">[</span><span class="CharLit">'e'</span><span class="Punctuation">]</span> <span class="Operator">=</span> <span class="Punctuation">[</span><span class="DecNumber">2</span><span class="Punctuation">,</span> <span class="DecNumber">4</span><span class="Punctuation">,</span> <span class="DecNumber">6</span><span class="Punctuation">,</span> <span class="DecNumber">8</span><span class="Punctuation">]</span>
<span class="Keyword">for</span> <span class="Punctuation">(</span><span class="Identifier">k</span> <span class="Punctuation">,</span> <span class="Identifier">index</span><span class="Punctuation">)</span> <span class="Keyword">in</span> <span class="Identifier">a</span><span class="Operator">.</span><span class="Identifier">keys</span><span class="Punctuation">:</span>
  <span class="Identifier">a</span><span class="Operator">.</span><span class="Identifier">withFound</span><span class="Punctuation">(</span><span class="Identifier">k</span><span class="Punctuation">,</span> <span class="Identifier">index</span><span class="Punctuation">)</span><span class="Punctuation">:</span>
    <span class="Identifier">echo</span> <span class="StringLit">&quot;key: &quot;</span><span class="Punctuation">,</span> <span class="Identifier">k</span>
    <span class="Identifier">echo</span> <span class="StringLit">&quot;value: &quot;</span><span class="Punctuation">,</span> <span class="Identifier">value</span><span class="Punctuation">[</span><span class="Punctuation">]</span>
    <span class="Identifier">doAssert</span> <span class="Punctuation">(</span><span class="Identifier">k</span> <span class="Operator">==</span> <span class="CharLit">'o'</span> <span class="Keyword">and</span> <span class="Identifier">value</span><span class="Punctuation">[</span><span class="Punctuation">]</span> <span class="Operator">==</span> <span class="Punctuation">[</span><span class="DecNumber">1</span><span class="Punctuation">,</span> <span class="DecNumber">5</span><span class="Punctuation">,</span> <span class="DecNumber">7</span><span class="Punctuation">,</span> <span class="DecNumber">9</span><span class="Punctuation">]</span><span class="Punctuation">)</span> <span class="Keyword">or</span> <span class="Punctuation">(</span><span class="Identifier">k</span> <span class="Operator">==</span> <span class="CharLit">'e'</span> <span class="Keyword">and</span> <span class="Identifier">value</span><span class="Punctuation">[</span><span class="Punctuation">]</span> <span class="Operator">==</span> <span class="Punctuation">[</span><span class="DecNumber">2</span><span class="Punctuation">,</span> <span class="DecNumber">4</span><span class="Punctuation">,</span> <span class="DecNumber">6</span><span class="Punctuation">,</span> <span class="DecNumber">8</span><span class="Punctuation">]</span><span class="Punctuation">)</span>  </pre>

</dd>

</dl></div>
<div class="section" id="18">
<h1><a class="toc-backref" href="#18">Templates</a></h1>
<dl class="item">
<a id="withFound.t,StashTable[K,V,Capacity],K,Index,untyped"></a>
<dt><pre><span class="Keyword">template</span> <a href="#withFound.t%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2CIndex%2Cuntyped"><span class="Identifier">withFound</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">;</span> <span class="Identifier">V</span><span class="Other">;</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">stash</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">thekey</span><span class="Other">:</span> <span class="Identifier">K</span><span class="Other">;</span>
                                <span class="Identifier">theindex</span><span class="Other">:</span> <a href="stashtable.html#Index"><span class="Identifier">Index</span></a><span class="Other">;</span> <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span></pre></dt>
<dd>

<p>Retrieves pointer to the value as variable <tt class="docutils literal"><span class="pre">value</span></tt> at <tt class="docutils literal"><span class="pre">theindex</span></tt>. <tt class="docutils literal"><span class="pre">thekey</span></tt> must also be given to ensure that the given Index is still holding the putative item.</p>
<p>Item is locked and value can be modified in the scope of <tt class="docutils literal"><span class="pre">withFound</span></tt> call.</p>
<p>On one hand this is faster operation than <tt class="docutils literal"><span class="pre">withValue</span></tt> because there's no need to find the Index, but on other hand there's greater probability that the item was deleted and reinserted to other Index by other thread(s) since the Index was retrieved.</p>

<p><strong class="examples_text">Examples:</strong></p>
<pre class="listing"><span class="Keyword">type</span>
  <span class="Identifier">Item</span> <span class="Other">=</span> <span class="Keyword">tuple</span><span class="Other">[</span><span class="Identifier">name</span><span class="Other">:</span> <span class="Identifier">char</span><span class="Other">,</span> <span class="Identifier">uid</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">]</span>
<span class="Keyword">let</span> <span class="Identifier">stash</span> <span class="Other">=</span> <span class="Identifier">newStashTable</span><span class="Other">[</span><span class="Identifier">int</span><span class="Other">,</span> <span class="Identifier">Item</span><span class="Other">,</span> <span class="DecNumber">8</span><span class="Other">]</span><span class="Other">(</span><span class="Other">)</span>
<span class="Keyword">let</span> <span class="Identifier">key</span> <span class="Other">=</span> <span class="DecNumber">42</span>
<span class="Identifier">stash</span><span class="Other">[</span><span class="Identifier">key</span><span class="Other">]</span> <span class="Other">=</span> <span class="Other">(</span><span class="CharLit">'a'</span><span class="Other">,</span> <span class="DecNumber">555</span><span class="Other">)</span>
<span class="Keyword">let</span> <span class="Identifier">index</span> <span class="Other">=</span> <span class="Identifier">stash</span><span class="Other">.</span><span class="Identifier">findIndex</span><span class="Other">(</span><span class="Identifier">key</span><span class="Other">)</span>
<span class="Identifier">stash</span><span class="Other">.</span><span class="Identifier">withFound</span><span class="Other">(</span><span class="Identifier">key</span><span class="Other">,</span> <span class="Identifier">index</span><span class="Other">)</span><span class="Other">:</span>
  <span class="Identifier">value</span><span class="Other">.</span><span class="Identifier">name</span> <span class="Other">=</span> <span class="CharLit">'u'</span>
  <span class="Identifier">value</span><span class="Other">.</span><span class="Identifier">uid</span> <span class="Other">=</span> <span class="DecNumber">1000</span>
<span class="Identifier">stash</span><span class="Other">.</span><span class="Identifier">withFound</span><span class="Other">(</span><span class="DecNumber">42</span><span class="Other">,</span> <span class="DecNumber">0</span><span class="Other">.</span><span class="Identifier">Index</span><span class="Other">)</span><span class="Other">:</span>
  <span class="Identifier">doAssert</span> <span class="Identifier">value</span><span class="Other">.</span><span class="Identifier">name</span> <span class="Operator">==</span> <span class="CharLit">'u'</span></pre>

</dd>
<a id="withValue.t,StashTable[K,V,Capacity],K,untyped,untyped"></a>
<dt><pre><span class="Keyword">template</span> <a href="#withValue.t%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2Cuntyped%2Cuntyped"><span class="Identifier">withValue</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">;</span> <span class="Identifier">V</span><span class="Other">;</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">stash</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">thekey</span><span class="Other">:</span> <span class="Identifier">K</span><span class="Other">;</span>
                                <span class="Identifier">body1</span><span class="Other">,</span> <span class="Identifier">body2</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span></pre></dt>
<dd>

<p>Retrieves pointer to the value as variable <tt class="docutils literal"><span class="pre">value</span></tt> for <tt class="docutils literal"><span class="pre">thekey</span></tt>. Item is locked and <tt class="docutils literal"><span class="pre">value</span></tt> can be modified in the scope of <tt class="docutils literal"><span class="pre">withValue</span></tt> call.</p>
<p><strong>Example:</strong></p>
<pre class="listing"><span class="Identifier">stashTable</span><span class="Operator">.</span><span class="Identifier">withValue</span><span class="Punctuation">(</span><span class="Identifier">key</span><span class="Punctuation">)</span><span class="Punctuation">:</span>
  <span class="Comment"># block is executed only if ``key`` in ``stashTable``</span>
  <span class="Identifier">value</span><span class="Operator">.</span><span class="Identifier">name</span> <span class="Operator">=</span> <span class="Identifier">username</span>
  <span class="Identifier">value</span><span class="Operator">.</span><span class="Identifier">uid</span> <span class="Operator">=</span> <span class="DecNumber">1000</span>
<span class="Keyword">do</span><span class="Punctuation">:</span>
  <span class="Comment"># block is executed when ``key`` not in ``stashTable``</span>
  <span class="Keyword">raise</span> <span class="Identifier">newException</span><span class="Punctuation">(</span><span class="Identifier">KeyError</span><span class="Punctuation">,</span> <span class="StringLit">&quot;Key not found&quot;</span><span class="Punctuation">)</span></pre>

</dd>
<a id="withValue.t,StashTable[K,V,Capacity],K,untyped"></a>
<dt><pre><span class="Keyword">template</span> <a href="#withValue.t%2CStashTable%5BK%2CV%2CCapacity%5D%2CK%2Cuntyped"><span class="Identifier">withValue</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">;</span> <span class="Identifier">V</span><span class="Other">;</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">(</span><span class="Identifier">stash</span><span class="Other">:</span> <a href="stashtable.html#StashTable"><span class="Identifier">StashTable</span></a><span class="Other">[</span><span class="Identifier">K</span><span class="Other">,</span> <span class="Identifier">V</span><span class="Other">,</span> <span class="Identifier">Capacity</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">thekey</span><span class="Other">:</span> <span class="Identifier">K</span><span class="Other">;</span>
                                <span class="Identifier">body</span><span class="Other">:</span> <span class="Identifier">untyped</span><span class="Other">)</span></pre></dt>
<dd>

Retrieves pointer to the value as variable <tt class="docutils literal"><span class="pre">value</span></tt> for <tt class="docutils literal"><span class="pre">thekey</span></tt>. Item is locked and <tt class="docutils literal"><span class="pre">value</span></tt> can be modified in the scope of <tt class="docutils literal"><span class="pre">withValue</span></tt> call.

</dd>

</dl></div>

  </div>
</div>

    <div class="row">
      <div class="twelve-columns footer">
        <span class="nim-sprite"></span>
        <br/>
        <small>Made with Nim. Generated: 2020-03-28 10:04:12 UTC</small>
      </div>
    </div>
  </div>
</div>

</body>
</html>
